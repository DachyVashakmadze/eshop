@use '/src/mixins' as mixin;


@include mixin.theming() using($theme) {
    $particleColor: mixin.get-color($theme, 'accent', 600);
    .circle {
        background-image: radial-gradient(
        $particleColor,
        $particleColor 10%,
        hsla(hue($particleColor), saturation($particleColor), lightness($particleColor), 0) 40%
      );
    }
}


.wrapper {
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    z-index: 5;
    transition: all 0.7s ease-in-out;
    
    &:hover {
        background-color: rgba(0,0,0,0.3);

        .circle-container {
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }
    }
}

.circle-container {
    $particleWidth: 10px;
    $particleNum: 50;

    opacity: 0;
    transition: opacity 0.5s ease-in;
  
    position: absolute;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
  
    .circle {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      mix-blend-mode: screen;
  
      animation: scale-frames 2s infinite;
  
      @keyframes fade-frames {
        0% {
          opacity: 1;
        }
  
        50% {
          opacity: 0.7;
        }
  
        100% {
          opacity: 1;
        }
      }
  
      @keyframes scale-frames {
        0% {
          transform: scale3d(0.4, 0.4, 1);
        }
  
        50% {
          transform: scale3d(2.2, 2.2, 1);
        }
  
        100% {
          transform: scale3d(0.4, 0.4, 1);
        }
      }
    }
  
    @for $i from 1 through $particleNum {
      &:nth-child(#{$i}) {
        $circleSize: random($particleWidth);
        width: $circleSize + px;
        height: $circleSize + px;
  
        $startPositionY: random(200);
        $framesName: "move-frames-" + $i;
        $moveDuration: 7000 + random(4000) + ms;
  
        animation-name: #{$framesName};
        animation-duration: $moveDuration;
        animation-delay: random(11000) + ms;
  
        @keyframes #{$framesName} {
          from {
            transform: translate3d(
              #{random(340) + 'px'},
              #{$startPositionY + 'px'},
              0
            );
          }
          
          to {
            transform: translate3d(
              #{random(340) + 'px'},
              #{$startPositionY + random(30) + 'px'},
              0
            );
          }
        }
  
        .circle {
          animation-delay: random(2000) + ms;
        }
      }
    }
  }
  

.star {
    position: relative;
    
    display: inline-block;
    width: 0;
    height: 0;
    
    margin-left: .9em;
    margin-right: .9em;
    margin-bottom: 1.2em;
    
    border-right:  .3em solid transparent;
    border-bottom: .7em  solid #FC0;
    border-left:   .3em solid transparent;
  
    /* Controlls the size of the stars. */
    font-size: 24px;
    
    &:before, &:after {
      content: '';
      
      display: block;
      width: 0;
      height: 0;
      
      position: absolute;
      top: .6em;
      left: -1em;
    
      border-right:  1em solid transparent;
      border-bottom: .7em  solid #FC0;
      border-left:   1em solid transparent;
    
      transform: rotate(-35deg);
    }
    
    &:after {  
      transform: rotate(35deg);
    }
  }